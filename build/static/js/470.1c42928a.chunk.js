"use strict";(self.webpackChunkinteriit_scores_app_ibp=self.webpackChunkinteriit_scores_app_ibp||[]).push([[470],{470:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(165),s=t(861),a=t(433),c=t(439),l=t(689),u=t(184),o=function(e){var n=e.items,t=(0,l.s0)();return(0,u.jsx)("div",{className:"sidebar",children:(0,u.jsx)("div",{className:"items",children:n.map((function(e,n){return(0,u.jsxs)("div",{className:"item",tabIndex:1,onClick:function(){return t(e.linkTo)},children:[(0,u.jsx)(e.icon,{fontSize:"large"}),(0,u.jsx)("span",{className:"title",children:e.title})]},n)}))})})},i=t(791),d=function(e){return e.ADMIN="Admin",e.SCORE_EDITOR="ScoreEditor",e}({}),m=t(527),h=t(451),x=t(939),f=function(e){var n=e.role;return(0,u.jsx)("span",{style:{backgroundColor:n===d.ADMIN?"red":"green"},className:"chip",children:n})},p=function(e){var n=e.user,t=e.onDelete,r=(0,i.useState)(!1),s=(0,c.Z)(r,2),a=s[0],l=s[1];return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:n.name}),(0,u.jsx)("td",{onClick:function(){l(!0),setTimeout((function(){return l(!1)}),2e3)},children:a?n.password:n.username}),(0,u.jsx)("td",{className:"chipCell",children:(0,u.jsx)(f,{role:n.role})}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:"styledButton",onClick:function(){return t(n)},children:"Delete"})})]})},j=function(e){var n=e.users,t=e.onDelete,r=e.onUserAdd,s=(0,i.useState)(""),a=(0,c.Z)(s,2),l=a[0],o=a[1],m=(0,i.useState)(""),h=(0,c.Z)(m,2),x=h[0],f=h[1],j=(0,i.useState)(""),v=(0,c.Z)(j,2),N=v[0],Z=v[1],b=(0,i.useState)(""),k=(0,c.Z)(b,2),C=k[0],y=k[1],g=(0,i.useState)(d.SCORE_EDITOR),D=(0,c.Z)(g,2),w=D[0],T=D[1],S=(0,i.useRef)(null);return(0,u.jsxs)("div",{className:"usersContainer",children:[(0,u.jsxs)("section",{className:"top",children:[(0,u.jsx)("button",{onClick:function(){var e;null===(e=S.current)||void 0===e||e.showModal(),o(""),f(""),Z("")},className:"styledButton",children:"Add User"}),(0,u.jsxs)("dialog",{ref:S,children:[(0,u.jsx)("button",{className:"styledButton",onClick:function(){var e;null===(e=S.current)||void 0===e||e.close()},children:"Close"}),(0,u.jsx)("h3",{children:"Add User Details"}),(0,u.jsxs)("form",{onSubmit:function(e){var n;if(e.preventDefault(),""===l||""===x||""===N)return y("Enter Name, Username and Password!"),void setTimeout((function(){return y("")}),3e3);r({name:l,username:x,role:w},N),null===(n=S.current)||void 0===n||n.close()},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Name"}),(0,u.jsx)("input",{name:"Name",onChange:function(e){return o(e.target.value)},value:l,className:"styledInput"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Username"}),(0,u.jsx)("input",{name:"Username",onChange:function(e){return f(e.target.value)},value:x,className:"styledInput"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Password"}),(0,u.jsx)("input",{name:"Password",onChange:function(e){return Z(e.target.value)},value:N,className:"styledInput"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Role"}),(0,u.jsxs)("select",{onChange:function(e){return T(e.target.value)},value:w,className:"styledButton dropdown",children:[(0,u.jsx)("option",{value:d.ADMIN,children:d.ADMIN}),(0,u.jsx)("option",{value:d.SCORE_EDITOR,children:d.SCORE_EDITOR})]})]}),(0,u.jsx)("button",{className:"styledButton",type:"submit",children:"Add"})]}),C]})]}),(0,u.jsx)("section",{className:"main",children:(0,u.jsxs)("table",{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Name"}),(0,u.jsx)("td",{children:"Username"}),(0,u.jsx)("td",{children:"Role"}),(0,u.jsx)("td",{children:"Action"})]})}),(0,u.jsx)("tbody",{children:n.map((function(e,n){return(0,u.jsx)(p,{user:e,onDelete:t},n)}))})]})})]})},v=function(){return(0,u.jsx)(u.Fragment,{children:"Edit Scores Component"})},N=t(25),Z=t(356),b=t(839),k=t(174),C=function(e){var n=e.team,t=e.onDelete;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:n.name}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:function(){return t(n)},className:"styledButton",children:"Delete"})})]})},y=function(e){var n=e.teams,t=e.onTeamAdd,r=e.onTeamDelete,s=(0,i.useRef)(null),a=(0,i.useRef)(null),l=(0,i.useState)(""),o=(0,c.Z)(l,2),d=o[0],m=o[1],h=(0,i.useState)(),x=(0,c.Z)(h,2),f=x[0],p=x[1],j=(0,i.useState)(""),v=(0,c.Z)(j,2),N=v[0],Z=v[1],b=function(){var e,n;null===(e=s.current)||void 0===e||e.close(),null===(n=a.current)||void 0===n||n.close()},k=function(e){var n;p(e),null===(n=a.current)||void 0===n||n.showModal()};return(0,u.jsxs)("div",{className:"usersContainer",children:[(0,u.jsxs)("div",{className:"top",children:[(0,u.jsx)("button",{onClick:function(){var e;null===(e=s.current)||void 0===e||e.showModal()},className:"styledButton",children:"Add Team"}),(0,u.jsxs)("dialog",{ref:s,children:[(0,u.jsx)("button",{className:"styledButton",onClick:b,children:"Close"}),(0,u.jsx)("h3",{children:"Add Team Details"}),(0,u.jsxs)("form",{onSubmit:function(e){var n;if(e.preventDefault(),""===d)return Z("Enter Name!"),void setTimeout((function(){return Z("")}),3e3);t({name:d}),null===(n=s.current)||void 0===n||n.close()},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Name"}),(0,u.jsx)("input",{name:"Name",onChange:function(e){return m(e.target.value)},value:d,className:"styledInput"})]}),(0,u.jsx)("button",{className:"styledButton",type:"submit",children:"Add"})]}),N]}),(0,u.jsxs)("dialog",{ref:a,children:[(0,u.jsx)("button",{className:"styledButton",onClick:b,children:"Close"}),(0,u.jsx)("h3",{children:"Caution"}),"Are you sure you want to Delete",(0,u.jsx)("br",{})," ",(0,u.jsxs)("b",{children:[null===f||void 0===f?void 0:f.name," ?"]}),(0,u.jsx)("form",{onSubmit:function(e){var n;e.preventDefault(),r(f),null===(n=a.current)||void 0===n||n.close(),p(void 0)},children:(0,u.jsx)("button",{className:"styledButton",type:"submit",children:"Yes"})})]})]}),(0,u.jsx)("div",{className:"main",children:(0,u.jsxs)("table",{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Team Name"}),(0,u.jsx)("td",{children:"Action"})]})}),(0,u.jsx)("tbody",{children:n.map((function(e,n){return(0,u.jsx)(C,{team:e,onDelete:k},n)}))})]})})]})},g=function(){var e=(0,l.UO)(),n=(0,l.s0)(),t=(0,N.QJ)(),p=(0,i.useContext)(k.u).setToastMessage,C=(0,N.fC)(),g=(0,i.useRef)(C()),D=(0,N.cl)(),w=(0,i.useState)(!1),T=(0,c.Z)(w,2),S=T[0],A=T[1],I=(0,i.useState)([]),U=(0,c.Z)(I,2),E=U[0],R=U[1],B=(0,i.useState)([]),O=(0,c.Z)(B,2),M=O[0],_=O[1],J=(0,i.useRef)([].concat((0,a.Z)(g.current.role===d.ADMIN?[{title:"Users",linkTo:"users",icon:m.Z}]:[]),[{title:"Edit Scores",linkTo:"edit_scores",icon:h.Z}],(0,a.Z)(g.current.role===d.ADMIN?[{title:"Teams",linkTo:"teams",icon:x.Z}]:[]))),q=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.Z.GetUsers(D());case 2:n=e.sent.data,t=n.map((function(e){return{name:e.name,username:e.username,role:e.role,password:e.password}})),R(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.Z.GetTeams(D());case 2:n=e.sent.data,t=n.map((function(e){return{name:e.name}})),_(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){g.current.role===d.ADMIN&&(q(),P())}),[]),(0,i.useEffect)((function(){e["*"]||n(J.current[0].linkTo)}),[]);var Y=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n("/login"),e.next=3,Z.Z.Logout({refreshToken:(0,b.YV)()});case 3:p("Logged Out"),t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.CreateUserWithUsernameAndPassword({name:n.name,username:n.username,role:n.role,password:t,accessToken:D()});case 3:return e.next=5,q();case 5:p("Added User "+n.username),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);try{p(JSON.parse(e.t0.request.response).message)}catch(r){p("Could not connect with the Server"),console.log(e.t0)}case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}(),G=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.username!==g.current.username){e.next=5;break}return p("You Cant Delete Yourself!"),e.abrupt("return");case 5:return e.prev=5,e.next=8,Z.Z.DeleteUser(n.username,D());case 8:return e.next=10,q();case 10:p("Deleted User "+n.username),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);try{p(JSON.parse(e.t0.request.response).message)}catch(t){p("Could not connect with the Server"),console.log(e.t0)}case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.AddTeam(D(),n);case 3:return e.next=5,P();case 5:p("Added Team "+n.name),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);try{p(JSON.parse(e.t0.request.response).message)}catch(t){p("Could not connect with the Server"),console.log(e.t0)}case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.DeleteTeam(D(),n.name);case 3:return e.next=5,P();case 5:p("Deleted Team "+n.name),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);try{p(JSON.parse(e.t0.request.response).message)}catch(t){p("Could not connect with the Server"),console.log(e.t0)}case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"admin-container",children:[(0,u.jsx)(o,{items:J.current}),(0,u.jsxs)("section",{className:"admin-content",children:[(0,u.jsxs)("section",{className:"floatingDialogBox",children:[(0,u.jsxs)("button",{className:"styledButton",onClick:function(){return A((function(e){return!e}))},children:[(0,u.jsx)("span",{className:"user-name-text",children:g.current.name})," ",(0,u.jsx)(f,{role:g.current.role})]}),S&&(0,u.jsxs)("div",{style:{margin:"10px"},children:["Username:",(0,u.jsx)("br",{}),g.current.username,(0,u.jsx)("button",{onClick:Y,style:{marginTop:"5px"},className:"styledButton",children:"Logout"})]})]}),(0,u.jsx)(l.Z5,{children:[].concat((0,a.Z)(g.current.role===d.ADMIN?[{linkTo:"users",element:(0,u.jsx)(j,{onUserAdd:L,onDelete:G,users:E})}]:[]),[{linkTo:"edit_scores",element:(0,u.jsx)(v,{})}],(0,a.Z)(g.current.role===d.ADMIN?[{linkTo:"teams",element:(0,u.jsx)(y,{teams:M,onTeamAdd:W,onTeamDelete:z})}]:[])).map((function(e,n){var t=e.linkTo,r=e.element;return(0,u.jsx)(l.AW,{path:t,element:r},n)}))})]})]})}}}]);
//# sourceMappingURL=470.1c42928a.chunk.js.map